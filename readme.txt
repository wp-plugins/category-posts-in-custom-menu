=== Category Posts in Custom Menu ===
Contributors: anaid
Tags: menu, category, post tag, tag, posts, dynamic, automatic, custom, taxonomy, custom taxonomy
Requires at least: 3.2.1
Tested up to: 3.8
Stable tag: 0.9.3

Dynamic menus: This plugin automatically replaces selected Category / Post Tag / Custom Taxonomy links in a Custom Menu by a list of their posts/pages.

== Description ==

The custom menu only allows adding a link that leads to a list of posts and pages belonging to a taxonomy (category, tag or custom). I wanted to insert the posts and pages <b>themselves</b> into the menu, so I wrote this plug-in. If you want to list the posts and pages belonging to a certain taxonomy in the menu and if you want Wordpress to do this automatically for you, then I hope you will find this plugin useful.

<strong>Now also works for custom post taxonomies and custom post types!</strong>

= Using it =
Enable the plugin and go to Appearance > Menus. Create your Custom Menu. Add a taxonomy (category/tag/custom) to the menu. Next, you can choose if you would like to replace the original link (to a page that lists the items) by the posts and pages themselves.

For each Category or Post Tag item in the menu, you now have the following extra configuration options: 

* replace the link by a list of posts in the menu y/n; 
* specify the (maximum) number of posts you want to show for this item (-1 = all);
* their ordering ascending or descending by ID, Author, Title and other properties. See 'Other Notes > Ordering'.
* keep or remove the original menu item (always / only if there are no posts / never);
* specify the title for the menu items. For this you can use %post_title, %post_author and other wildcards, see 'Other Notes > Wildcards'.

= Details =
This plugin uses the wp_nav_menu_objects filter hook to remove and replace category items in the menu by the posts in that category. It extends Walker_Nav_Menu_Edit to add input fields to Appearance > Menus and adds some CSS to style this properly.

== Wildcards ==

You can control the title of the menu items generated by the plug-in with the following wildcards:

* %post_title
* %post_author
* %post_featured_image_url
* %post_featured_image (insers an HTML 'img' tag with the featured image or nothing if there is none)
* %post_featured_image_thumb_url
* %post_featured_image_thumb (insers an HTML 'img' tag with the featured image thumbnail or nothing if there is none)
* %post_excerpt
* %post_url
* %post_date for the unformatted post date: 2012-11-10 18:14:23
* %post_date() for a formatted post date with the following default formatting: November 10th, 2012
* %post_date(&lt;your formatting here&gt;) for custom date formatting. Example: %post_date(l jS \of F Y, h:i:s A). See <a href="http://codex.wordpress.org/Formatting_Date_and_Time">http://codex.wordpress.org/Formatting_Date_and_Time</a> for formatting options.
* %post_date_gmt
* %post_date_gmt()
* %post_date_gmt(&lt;your formatting here&gt;)
* %post_status
* %post_modified
* %post_modified()
* %post_modified(&lt;your formatting here&gt;)
* %post_modified_gmt
* %post_modified_gmt()
* %post_modified_gmt(&lt;your formatting here&gt;)
* %post_comment_count
* wildcards for custom fields, like %post_my_field, where 'my field' or 'my_field' is a custom field

The following wildcards are deprecated:

* %post_feat_image (url only)
* %post_feat_image_thumb (url only)

== Ordering ==

You can control the ordering of the items in the menu by sorting ascending or descending on the following properties:

* None
* ID
* Author
* Title
* Date
* Last Modified
* Post/Page parent ID
* Random Order
* Number of Comments
* Menu Order - Ordering by menu order is only possible for hierarchical types, such as pages. These have the 'Order' option when editing, this is the menu order.

== Screenshots ==

1. Go to Appearance > Menu to enable/disable and set the options for the replacement of Category / Post Tag links by their posts.

== Changelog ==

0.9.3

* Fix http://wordpress.org/support/topic/issue-with-default-wordpress-sidebar-menu
* Fix http://wordpress.org/support/topic/menu-do-not-include-the-current-menu-parent-class
* Add support for auto-generated image tags, see http://wordpress.org/support/topic/images-showing-url-instead-of-actual-image

0.9.2

* Fixed bug introduced in 0.9.1 with respect to old PHP versions (5.2 and before) http://wordpress.org/support/topic/unexpected-t_function-1
* Introduced an extra ordering option 'Menu Order', as suggested here: http://wordpress.org/support/topic/extend-orderby-to-menu_order

0.9.1

* Edits for strict mode (http://wordpress.org/support/topic/edits-for-strict-mode)
* Add thumbnail option with posts (http://wordpress.org/support/topic/add-thumbnail-option-with-posts)
* PHP 5.5 preg_replace() /e modifier deprecated (http://wordpress.org/support/topic/php-55-preg_replace-e-modifier-depricated)

0.9

* Fixed CSS 'active' class problem: CSS classes are no longer copied from the parent menu item to the menu item for the posts/pages.

0.8

* Added the option to keep or remove the original menu item. Initially, the original menu item was replaced by the list of its posts, but now you can choose for yourself whether this should be done (always / only if there are no posts / never)

0.7.2

* Bugfix: Fixed invalid argument error reported by macrocurio in Plugin Support.

0.7.1

* Bugfix: Link Target, CSS Classes, Link Relationship (XFN) and Description weren't inherited from the original menu item. They are now.

0.7

* Added support for custom post types
* Fixed user_data bug
* Added date formatting options

0.6

* Added a bunch of wildcards: %post_feat_image (url only), %post_excerpt, %post_url, %post_date, %post_date_gmt, %post_status, %post_modified, %post_modified_gmt, %post_comment_count

0.5

* Enable custom taxonomies.
* Change plugin URL.

0.4

* Fix plugin bug for Tags, probably related to 3.2.2 update.
* Edit documentation
* Change some CSS to show checkbox next to label instead of above it.
* Edit text in menu item block to clarify use of custom fields.

0.3

* Extended the plugin for use of custom fields. Use a custom field with name 'my field' with wildcard %post_my_field. Note that if the post does not have this custom field, the wildcard is removed (it is not replaced by anything).

0.2

* Extended the plugin to post tags. Note that the plugin name has unfortunately _not_ been changed to reflect this extension. 

Added checkboxes, dropdowns and text fields to Appearance > Menu. It is now possible to:

* Enable/disable per taxonomy item whether you want to replace it by its posts
* Specify the (maximum) number of posts that should be displayed.
* Specify the ordering (Descending/Ascending) and the field to order by (ID, title, etc..)
* Set a title for the menu items. For this you can use the wildcards %post_title and %post_author.

== Installation ==

1. Upload `category-posts-in-custom-menu.php` to the `/wp-content/plugins/` directory
2. Activate the plugin through the 'Plugins' menu in WordPress

== Frequently Asked Questions ==

= How do I use it?  =

Here's a walkthrough:

<ol>
<li>Enable the Twenty Eleven theme.</li>
<li>Disable all plugins except Category Posts in Custom Menu.</li>
<li>Create a post with title "My test post" and add a _new_ category "CPCMtest"</li>
<li>Save the post</li>
<li>Go to Appearances > Menus</li>
<li>Click "create a new menu"</li>
<li>Give the new menu the name "CPCM"</li>
<li>Add the category "CPCMtest" by opening "Categories", checking that category and clicking "Add to menu"</li>
<li>Open the menu item and check "Create submenu containing links to posts with this tag."</li>
<li>Under "Remove original menu item" choose "Never"</li>
<li>Do not change anything else about the menu item</li>
<li>Scroll all the way down and check under "Theme Locations" the checkbox "Primary Menu"</li>
<li>Save the menu</li>
</ol>

If you now look at your blog, you will have a menu with only one item: "CPCMtest". If you hover over that item with the mouse, it will open, and a post is displayed titled "My test post".

= Can't see it working in any way =

Problem: "I can't see what effect it has had. Nothing has changed (not that I can see) in the Appearance > Menu page. Just like before." 

Possible causes:
<ul>
<li>You're already using another plugin that uses the wp_nav_menu_edit hook and has a higher priority than mine. This is by design: My plugin is not critical and therefore I don't claim a high priority on the hooks. Plugins/Themes that indicate to be more important will be given priority.</li>
<li>You're using a theme that somehow doesn't support editing the menu. Try using the default Wordpress theme to see if your problem persists. I can't offer much support if the theme is the problem.</li>
<li>Issue 14527 (http://core.trac.wordpress.org/ticket/14527) may be the cause. When adding a menu item but <i>before</i> saving it, you will indeed see none of the promised checkboxes. So be sure to <b>save your menu</b> after you add a Category/Tag to your menu. <i>Then</i> you'll see the added functionality.

The reason is because the hook that is used to extend the functionality is not being applied until you've saved the item. A patch was approved for Wordpress 3.4, so upgrade your Wordpress installation. :)</li>
</ul>